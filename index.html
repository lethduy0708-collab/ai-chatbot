<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gion Duy - AI Chatbot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id="app" class="flex flex-col h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900">
        <!-- Header -->
        <div class="bg-black/30 backdrop-blur-sm border-b border-purple-500/30 p-4 shadow-lg">
            <div class="max-w-4xl mx-auto flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="bg-gradient-to-br from-purple-500 to-pink-500 p-2 rounded-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-white">Gion Duy</h1>
                        <p class="text-xs text-purple-300">Powered by Thai Duy & Gia Minh</p>
                    </div>
                </div>
                <button onclick="clearChat()" class="flex items-center gap-2 px-3 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-300 rounded-lg transition-colors">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                    </svg>
                    <span class="text-sm">Clear</span>
                </button>
            </div>
        </div>

        <!-- Messages -->
        <div id="messages" class="flex-1 overflow-y-auto p-4">
            <div class="max-w-4xl mx-auto space-y-4" id="messageContainer"></div>
        </div>

        <!-- Input -->
        <div class="bg-black/30 backdrop-blur-sm border-t border-purple-500/30 p-4">
            <div class="max-w-4xl mx-auto">
                <div class="flex gap-2">
                    <input
                        type="text"
                        id="userInput"
                        placeholder="Ask me anything..."
                        class="flex-1 bg-black/50 text-white placeholder-gray-400 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-500/30"
                    />
                    <button
                        onclick="sendMessage()"
                        id="sendBtn"
                        class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white p-3 rounded-xl transition-all shadow-lg hover:shadow-purple-500/50"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let messages = [
            { role: 'assistant', content: 'Hello! I\'m Gion Duy, your AI assistant. I can help you with a wide variety of tasks including:\n\n• Answering questions and explaining concepts\n• Writing and editing content\n• Code generation and debugging\n• Math and problem solving\n• Creative brainstorming\n• Data analysis\n• And much more!\n\nWhat can I help you with today?' }
        ];
        let loading = false;

        function renderMessages() {
            const container = document.getElementById('messageContainer');
            container.innerHTML = '';
            
            messages.forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `flex gap-3 ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`;
                
                if (msg.role === 'assistant') {
                    messageDiv.innerHTML = `
                        <div class="bg-gradient-to-br from-purple-500 to-pink-500 p-2 rounded-full h-8 w-8 flex-shrink-0">
                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                        </div>
                        <div class="max-w-[80%] rounded-2xl p-4 bg-black/40 backdrop-blur-sm text-gray-100 border border-purple-500/30">
                            <div class="whitespace-pre-wrap break-words">${escapeHtml(msg.content)}</div>
                        </div>
                    `;
                } else {
                    messageDiv.innerHTML = `
                        <div class="max-w-[80%] rounded-2xl p-4 bg-gradient-to-br from-blue-500 to-purple-600 text-white">
                            <div class="whitespace-pre-wrap break-words">${escapeHtml(msg.content)}</div>
                        </div>
                        <div class="bg-gradient-to-br from-blue-500 to-purple-600 p-2 rounded-full h-8 w-8 flex-shrink-0">
                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                    `;
                }
                
                container.appendChild(messageDiv);
            });

            if (loading) {
                const loadingDiv = document.createElement('div');
                loadingDiv.className = 'flex gap-3 justify-start';
                loadingDiv.innerHTML = `
                    <div class="bg-gradient-to-br from-purple-500 to-pink-500 p-2 rounded-full h-8 w-8">
                        <svg class="w-4 h-4 text-white animate-spin" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                    </div>
                    <div class="bg-black/40 backdrop-blur-sm rounded-2xl p-4 border border-purple-500/30">
                        <svg class="w-5 h-5 text-purple-400 animate-spin" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                    </div>
                `;
                container.appendChild(loadingDiv);
            }

            const messagesDiv = document.getElementById('messages');
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const userMessage = input.value.trim();
            
            if (!userMessage || loading) return;

            input.value = '';
            messages.push({ role: 'user', content: userMessage });
            loading = true;
            document.getElementById('sendBtn').disabled = true;
            input.disabled = true;
            
            renderMessages();

            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1000,
                        messages: messages.map(msg => ({
                            role: msg.role,
                            content: msg.content
                        })),
                    }),
                });

                const data = await response.json();
                
                if (data.content && data.content.length > 0) {
                    const assistantMessage = data.content
                        .filter(item => item.type === 'text')
                        .map(item => item.text)
                        .join('\n');
                    
                    messages.push({ role: 'assistant', content: assistantMessage });
                } else {
                    messages.push({ role: 'assistant', content: 'I apologize, but I encountered an error processing your request. Please try again.' });
                }
            } catch (error) {
                messages.push({ role: 'assistant', content: 'I apologize, but I encountered an error processing your request. Please try again.' });
                console.error('Error:', error);
            } finally {
                loading = false;
                document.getElementById('sendBtn').disabled = false;
                input.disabled = false;
                input.focus();
                renderMessages();
            }
        }

        function clearChat() {
            messages = [
                { role: 'assistant', content: 'Chat cleared! How can I assist you?' }
            ];
            renderMessages();
        }

        document.getElementById('userInput').addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        renderMessages();
    </script>
</body>
</html>